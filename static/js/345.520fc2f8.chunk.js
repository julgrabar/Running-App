(self.webpackChunkrun_app=self.webpackChunkrun_app||[]).push([[345],{5345:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return q}});var n=t(168),i=t(885),o=t(2791),a=t(3867);function u(){return u=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},u.apply(this,arguments)}var c=function(e,r){void 0===r&&(r={});var n,i=r,a=i.volume,c=void 0===a?1:a,s=i.playbackRate,d=void 0===s?1:s,l=i.soundEnabled,f=void 0===l||l,p=i.interrupt,_=void 0!==p&&p,m=i.onload,h=function(e,r){if(null==e)return{};var t,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(i[t]=e[t]);return i}(i,["id","volume","playbackRate","soundEnabled","interrupt","onload"]),v=o.useRef(null),k=o.useRef(!1),w=o.useState(null),b=w[0],y=w[1],g=o.useState(null),x=g[0],j=g[1],T=function(){"function"===typeof m&&m.call(this),k.current&&y(1e3*this.duration()),j(this)};n=function(){return t.e(845).then(t.t.bind(t,1845,23)).then((function(r){var t;k.current||(v.current=null!==(t=r.Howl)&&void 0!==t?t:r.default.Howl,k.current=!0,new v.current(u({src:Array.isArray(e)?e:[e],volume:c,rate:d,onload:T},h)))})),function(){k.current=!1}},(0,o.useEffect)(n,[]),o.useEffect((function(){v.current&&x&&j(new v.current(u({src:Array.isArray(e)?e:[e],volume:c,onload:T},h)))}),[JSON.stringify(e)]),o.useEffect((function(){x&&(x.volume(c),x.rate(d))}),[c,d]);var W=o.useCallback((function(e){"undefined"===typeof e&&(e={}),x&&(f||e.forceSoundEnabled)&&(_&&x.stop(),e.playbackRate&&x.rate(e.playbackRate),x.play(e.id))}),[x,f,_]),M=o.useCallback((function(e){x&&x.stop(e)}),[x]),Z=o.useCallback((function(e){x&&x.pause(e)}),[x]);return[W,{sound:x,stop:M,pause:Z,duration:b}]};var s=t.p+"static/media/pause.1071008aaf34ff48cdc52b9f26506338.svg";var d,l=t.p+"static/media/play.6793b61117f1d66d088536f2c3013b54.svg",f=t(6031),p=f.ZP.div(d||(d=(0,n.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  span {\n    font-size: 80px;\n    font-weight: 500;\n  }\n"]))),_=t(5686),m=t(184),h=t(9260),v=function(e){var r=e.exersice,t=e.onTimerFinished,n=r.duration,u=(0,o.useState)(n),d=(0,i.Z)(u,2),f=d[0],v=d[1],k=(0,o.useState)(!0),w=(0,i.Z)(k,2),b=w[0],y=w[1],g=c(h,{volume:.5}),x=(0,i.Z)(g,1)[0],j=(0,o.useRef)();(0,o.useEffect)((function(){return W(),function(){return T()}}),[]),(0,o.useEffect)((function(){0===f&&(T(),x(),t(),W())}),[f,x]),(0,o.useEffect)((function(){v(n)}),[n,r]);var T=function(){"number"===typeof j.current&&((0,_.clearWorkerTimer)(j.current),y(!1))},W=function(){j.current=(0,_.setWorkerInterval)((function(){v((function(e){return e-1}))}),1e3),y(!0)};return(0,m.jsxs)(p,{children:[(0,m.jsxs)("span",{children:[Math.floor(f/60)>0&&"".concat(Math.floor(f/60)," :"),(f%60).toString().padStart(2,"0")]}),(0,m.jsx)(a.z,{onClick:b?T:W,primary:!0,round:{diameter:50},children:b?(0,m.jsx)("img",{src:s,alt:"Stop"}):(0,m.jsx)("img",{src:l,alt:"Start"})})]})},k=t(4009),w=t(2982),b={exercise_type:{image:"https://res.cloudinary.com/hbtwvj70x/image/upload/v1/media/exercises/walking_gif_rlcfoy",title:"Fast walking"},duration:300};var y=t(1933),g=t(6871),x=t(7622);var j,T,W=t.p+"static/media/finished.64f5cbd0b786fccef8fdd47a0976c54f.svg",M=t(7126),Z=t(6046),S=t(1156),I=t(1480),O="idle",E="inProgress",P="finished",q=function(){var e=(0,Z.C)(S.M7),r=(0,o.useState)(O),t=(0,i.Z)(r,2),n=t[0],u=t[1],c=(0,o.useState)(0),s=(0,i.Z)(c,2),d=s[0],f=s[1],p=(0,g.UO)(),_=p.workoutId,h=p.weekId,j=(0,g.s0)(),T=[],q=(0,y.useQuery)(["workout",_],(function(){return(0,x.G3)(_)})),B=q.data,F=q.isLoading,L=q.isSuccess,U=q.isError;B&&0===T.length&&(T=function(e){var r=e.exercises,t=e.repetitions_number,n=[];n.push(b);for(var i=1;i<=t;i+=1)n=[].concat((0,w.Z)(n),(0,w.Z)(r));return n.push(b),n}(B));var z=function(){u(P),!e||!_||null!==B&&void 0!==B&&B.is_passed||(0,x.JU)(_)};return(0,m.jsx)(M.w,{children:(0,m.jsxs)(C,{children:[F&&(0,m.jsx)(I.a,{absolute:!0}),U&&(0,m.jsx)("p",{children:"Something went wrong..."}),L&&B&&(0,m.jsxs)(m.Fragment,{children:[n===O&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(k.X6,{dark:!0,children:B.title}),(0,m.jsx)(a.z,{type:"button",onClick:function(){return u(E)},round:{diameter:160},primary:!0,children:(0,m.jsx)("img",{src:l,alt:"Play"})})]}),n===E&&T.length>0&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(k.X6,{dark:!0,children:T[d].exercise_type.title}),(0,m.jsx)("img",{className:"exercise-img",src:T[d].exercise_type.image,alt:T[d].exercise_type.title}),(0,m.jsx)(v,{exersice:T[d],onTimerFinished:function(){d!==T.length-1?f((function(e){return e+1})):z()}}),(0,m.jsxs)(R,{children:[(0,m.jsx)(a.z,{primary:!0,onClick:0===d?function(){return j("/trainings/".concat(h))}:function(){return f((function(e){return e-1}))},children:0===d?"Go back":"Previous"}),(0,m.jsx)(a.z,{primary:!0,onClick:T.length===d+1?z:function(){return f((function(e){return e+1}))},children:T.length===d+1?"Finish workout":"Next"})]})]}),n===P&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(k.X6,{dark:!0,children:"Well done! Workout is finished."}),(0,m.jsx)("img",{src:W,alt:"Workout is finished"}),(0,m.jsx)(a.z,{type:"button",primary:!0,onClick:function(){return j("/trainings")},style:{marginTop:"20px"},children:"Go back"})]})]})]})})},C=(0,f.ZP)(M.s)(j||(j=(0,n.Z)(["\n  text-align: center;\n  width: 100%;\n  max-width: 360px;\n  span {\n    display: block;\n  }\n\n  img.exercise-img {\n    max-height: 225px;\n  }\n"]))),R=f.ZP.div(T||(T=(0,n.Z)(["\n  display: flex;\n  gap: 20px;\n  margin-top: 20px;\n"])))},7622:function(e,r,t){"use strict";t.d(r,{G3:function(){return s},JG:function(){return u},JU:function(){return d},LH:function(){return c}});var n=t(4165),i=t(5861),o=t(4569),a=t.n(o),u=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("/weeks/");case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("/week/".concat(r,"/"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),s=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("/training/".concat(r,"/"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),d=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a().post("/users/pass/training/",{training:r});case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},5686:function(module){var r;self,r=function(){return function(){"use strict";var __webpack_modules__={902:function(e,r,t){var n=this&&this.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.clearWorkerTimer=r.setWorkerInterval=r.setWorkerTimeout=void 0;var o=i(t(368));window.workerTimer=window.workerTimer instanceof o.default?window.workerTimer:new o.default;var a=window.workerTimer.setWorkerTimer.bind(window.workerTimer);r.setWorkerTimeout=function(e,r){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return a.apply(void 0,n(["timeout",e,r],t))},r.setWorkerInterval=function(e,r){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return a.apply(void 0,n(["interval",e,r],t))},r.clearWorkerTimer=window.workerTimer.clearWorkerTimer.bind(window.workerTimer)},368:function _(__unused_webpack_module,exports,__nested_webpack_require_1712__){var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var WorkerTimer_worker_ts_1=__importDefault(__nested_webpack_require_1712__(612)),WorkerTimer=function(){function WorkerTimer(){var e=this;this._worker=new WorkerTimer_worker_ts_1.default,this._cbMap=new Map,this._worker.addEventListener("message",(function(r){e._callId(r)}))}return WorkerTimer.prototype._genId=function(){for(var e=Math.random();this._cbMap.has(e);)e=Math.random();return e},WorkerTimer.prototype._callId=function(ev){var id=ev.data.payload.id,record=this._cbMap.get(id);record&&("string"==typeof record.cb?eval(record.cb).apply(void 0,record.args):record.cb.apply(record,record.args),"timeout"===record.method&&this._cbMap.delete(id))},WorkerTimer.prototype.setWorkerTimer=function(e,r,t){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];var o=this._genId();return this._cbMap.set(o,{method:e,cb:r,args:n}),this._worker.postMessage({type:"set",payload:{method:e,id:o,delay:t||0}}),o},WorkerTimer.prototype.clearWorkerTimer=function(e){e&&"number"==typeof e&&(this._cbMap.delete(e),this._worker.postMessage({type:"clear",payload:{id:e}}))},WorkerTimer}();exports.default=WorkerTimer},612:function(e,r,t){t.r(r),t.d(r,{default:function(){return o}});var n=t(477),i=t.n(n);function o(){return i()('!function(){"use strict";var t,e,a;t=self,e=new Map,a=function(e){t.postMessage({type:"call",payload:{id:e}})},t.addEventListener("message",(function(t){var d,o,i,n;"set"===t.data.type&&(d=t.data.payload.method,o=t.data.payload.id,i=t.data.payload.delay,n="timeout"===d?setTimeout((function(){a(o),e.delete(o)}),i):setInterval((function(){return a(o)}),i),e.set(o,{method:d,timerId:n})),"clear"===t.data.type&&function(t){var a=e.get(t);a&&("timeout"===a.method?clearTimeout(a.timerId):clearInterval(a.timerId),e.delete(t))}(t.data.payload.id)}))}();',"Worker",void 0,void 0)}},477:function(e){e.exports=function(e,r,t,n){var i=self||window;try{try{var o;try{o=new i.Blob([e])}catch(r){(o=new(i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||i.MSBlobBuilder)).append(e),o=o.getBlob()}var a=i.URL||i.webkitURL,u=a.createObjectURL(o),c=new i[r](u,t);return setTimeout((function(){a.revokeObjectURL(u)})),c}catch(n){return new i[r]("data:application/javascript,".concat(encodeURIComponent(e)),t)}}catch(e){if(!n)throw Error("Inline worker is not supported");return new i[r](n,t)}}}},__webpack_module_cache__={};function __nested_webpack_require_5630__(e){if(__webpack_module_cache__[e])return __webpack_module_cache__[e].exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__nested_webpack_require_5630__),r.exports}__nested_webpack_require_5630__.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return __nested_webpack_require_5630__.d(r,{a:r}),r},__nested_webpack_require_5630__.d=function(e,r){for(var t in r)__nested_webpack_require_5630__.o(r,t)&&!__nested_webpack_require_5630__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},__nested_webpack_require_5630__.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},__nested_webpack_require_5630__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__nested_webpack_require_5630__(902);return __webpack_exports__}()},module.exports=r()},9260:function(e,r,t){"use strict";e.exports=t.p+"static/media/sound.fa3551f6fab3f9997888.mp3"}}]);
//# sourceMappingURL=345.520fc2f8.chunk.js.map