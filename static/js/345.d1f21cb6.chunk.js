(self.webpackChunkrun_app=self.webpackChunkrun_app||[]).push([[345],{5345:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return P}});var n=t(168),i=t(885),o=t(6031),a=t(2791),u=t(1933),c=t(6871),s=t(3867);function d(){return d=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},d.apply(this,arguments)}var l=function(e,r){void 0===r&&(r={});var n,i=r,o=i.volume,u=void 0===o?1:o,c=i.playbackRate,s=void 0===c?1:c,l=i.soundEnabled,p=void 0===l||l,f=i.interrupt,_=void 0!==f&&f,m=i.onload,h=function(e,r){if(null==e)return{};var t,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(i[t]=e[t]);return i}(i,["id","volume","playbackRate","soundEnabled","interrupt","onload"]),v=a.useRef(null),k=a.useRef(!1),w=a.useState(null),b=w[0],y=w[1],g=a.useState(null),x=g[0],j=g[1],T=function(){"function"===typeof m&&m.call(this),k.current&&y(1e3*this.duration()),j(this)};n=function(){return t.e(845).then(t.t.bind(t,1845,23)).then((function(r){var t;k.current||(v.current=null!==(t=r.Howl)&&void 0!==t?t:r.default.Howl,k.current=!0,new v.current(d({src:Array.isArray(e)?e:[e],volume:u,rate:s,onload:T},h)))})),function(){k.current=!1}},(0,a.useEffect)(n,[]),a.useEffect((function(){v.current&&x&&j(new v.current(d({src:Array.isArray(e)?e:[e],volume:u,onload:T},h)))}),[JSON.stringify(e)]),a.useEffect((function(){x&&(x.volume(u),x.rate(s))}),[u,s]);var W=a.useCallback((function(e){"undefined"===typeof e&&(e={}),x&&(p||e.forceSoundEnabled)&&(_&&x.stop(),e.playbackRate&&x.rate(e.playbackRate),x.play(e.id))}),[x,p,_]),M=a.useCallback((function(e){x&&x.stop(e)}),[x]),Z=a.useCallback((function(e){x&&x.pause(e)}),[x]);return[W,{sound:x,stop:M,pause:Z,duration:b}]};var p=t.p+"static/media/pause.1071008aaf34ff48cdc52b9f26506338.svg";var f,_=t.p+"static/media/play.6793b61117f1d66d088536f2c3013b54.svg",m=o.ZP.div(f||(f=(0,n.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  span {\n    font-size: 80px;\n    font-weight: 500;\n  }\n"]))),h=t(5686),v=t(184),k=t(9260),w=function(e){var r=e.exersice,t=e.onTimerFinished,n=r.duration,o=(0,a.useState)(n),u=(0,i.Z)(o,2),c=u[0],d=u[1],f=(0,a.useState)(!0),w=(0,i.Z)(f,2),b=w[0],y=w[1],g=l(k,{volume:.5}),x=(0,i.Z)(g,1)[0],j=(0,a.useRef)();(0,a.useEffect)((function(){return W(),function(){return T()}}),[]),(0,a.useEffect)((function(){0===c&&(T(),x(),t(),W())}),[c,x]),(0,a.useEffect)((function(){d(n)}),[n,r]);var T=function(){"number"===typeof j.current&&((0,h.clearWorkerTimer)(j.current),y(!1))},W=function(){j.current=(0,h.setWorkerInterval)((function(){d((function(e){return e-1}))}),1e3),y(!0)};return(0,v.jsxs)(m,{children:[(0,v.jsxs)("span",{children:[Math.floor(c/60)>0&&"".concat(Math.floor(c/60)," :"),(c%60).toString().padStart(2,"0")]}),(0,v.jsx)(s.z,{onClick:b?T:W,primary:!0,round:{diameter:50},children:b?(0,v.jsx)("img",{src:p,alt:"Stop"}):(0,v.jsx)("img",{src:_,alt:"Start"})})]})},b=t(4009),y=t(2982),g={exercise_type:{image:"https://res.cloudinary.com/hbtwvj70x/image/upload/v1/media/exercises/walking_gif_rlcfoy",title:"Fast walking"},duration:300};var x=t(7622);var j,T,W=t.p+"static/media/finished.64f5cbd0b786fccef8fdd47a0976c54f.svg",M=t(6046),Z=t(1156),S=t(1480),I="idle",O="inProgress",E="finished",P=function(){var e=(0,M.C)(Z.M7),r=(0,a.useState)(I),t=(0,i.Z)(r,2),n=t[0],o=t[1],d=(0,a.useState)(0),l=(0,i.Z)(d,2),p=l[0],f=l[1],m=(0,c.UO)(),h=m.workoutId,k=m.weekId,j=(0,c.s0)(),T=[],P=(0,u.useQuery)(["workout",h],(function(){return(0,x.G3)(h)})),R=P.data,B=P.isLoading,F=P.isSuccess,L=P.isError;R&&0===T.length&&(T=function(e){var r=e.exercises,t=e.repetitions_number,n=[];n.push(g);for(var i=1;i<=t;i+=1)n=[].concat((0,y.Z)(n),(0,y.Z)(r));return n.push(g),n}(R));var U=function(){o(E),!e||!h||null!==R&&void 0!==R&&R.is_passed||(0,x.JU)(h)};return(0,v.jsxs)(q,{children:[B&&(0,v.jsx)(S.a,{absolute:!0}),L&&(0,v.jsx)("p",{children:"Something went wrong..."}),F&&R&&(0,v.jsxs)(v.Fragment,{children:[n===I&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(b.X6,{dark:!0,children:R.title}),(0,v.jsx)(s.z,{type:"button",onClick:function(){return o(O)},round:{diameter:160},primary:!0,children:(0,v.jsx)("img",{src:_,alt:"Play"})})]}),n===O&&T.length>0&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(b.X6,{dark:!0,children:T[p].exercise_type.title}),(0,v.jsx)("img",{className:"exercise-img",src:T[p].exercise_type.image,alt:T[p].exercise_type.title}),(0,v.jsx)(w,{exersice:T[p],onTimerFinished:function(){p!==T.length-1?f((function(e){return e+1})):U()}}),(0,v.jsxs)(C,{children:[(0,v.jsx)(s.z,{primary:!0,onClick:0===p?function(){return j("/trainings/".concat(k))}:function(){return f((function(e){return e-1}))},children:0===p?"Go back":"Previous"}),(0,v.jsx)(s.z,{primary:!0,onClick:T.length===p+1?U:function(){return f((function(e){return e+1}))},children:T.length===p+1?"Finish workout":"Next"})]}),(0,v.jsx)("progress",{max:T.length,value:p+1})]}),n===E&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(b.X6,{dark:!0,children:"Well done! Workout is finished."}),(0,v.jsx)("img",{src:W,alt:"Workout is finished"}),(0,v.jsx)(s.z,{type:"button",primary:!0,onClick:function(){return j("/trainings")},style:{marginTop:"20px"},children:"Go back"})]})]})]})},q=o.ZP.div(j||(j=(0,n.Z)(["\n  text-align: center;\n  width: 100%;\n  max-width: 360px;\n  margin: auto;\n  span {\n    display: block;\n  }\n\n  img.exercise-img {\n    max-height: 225px;\n  }\n\n  progress {\n    width: 100%;\n  }\n"]))),C=o.ZP.div(T||(T=(0,n.Z)(["\n  display: flex;\n  gap: 20px;\n  margin-top: 20px;\n"])))},7622:function(e,r,t){"use strict";t.d(r,{G3:function(){return s},JG:function(){return u},JU:function(){return d},LH:function(){return c}});var n=t(4165),i=t(5861),o=t(4569),a=t.n(o),u=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("/weeks/");case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("/week/".concat(r,"/"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),s=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("/training/".concat(r,"/"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),d=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a().post("/users/pass/training/",{training:r});case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},5686:function(module){var r;self,r=function(){return function(){"use strict";var __webpack_modules__={902:function(e,r,t){var n=this&&this.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.clearWorkerTimer=r.setWorkerInterval=r.setWorkerTimeout=void 0;var o=i(t(368));window.workerTimer=window.workerTimer instanceof o.default?window.workerTimer:new o.default;var a=window.workerTimer.setWorkerTimer.bind(window.workerTimer);r.setWorkerTimeout=function(e,r){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return a.apply(void 0,n(["timeout",e,r],t))},r.setWorkerInterval=function(e,r){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return a.apply(void 0,n(["interval",e,r],t))},r.clearWorkerTimer=window.workerTimer.clearWorkerTimer.bind(window.workerTimer)},368:function _(__unused_webpack_module,exports,__nested_webpack_require_1712__){var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var WorkerTimer_worker_ts_1=__importDefault(__nested_webpack_require_1712__(612)),WorkerTimer=function(){function WorkerTimer(){var e=this;this._worker=new WorkerTimer_worker_ts_1.default,this._cbMap=new Map,this._worker.addEventListener("message",(function(r){e._callId(r)}))}return WorkerTimer.prototype._genId=function(){for(var e=Math.random();this._cbMap.has(e);)e=Math.random();return e},WorkerTimer.prototype._callId=function(ev){var id=ev.data.payload.id,record=this._cbMap.get(id);record&&("string"==typeof record.cb?eval(record.cb).apply(void 0,record.args):record.cb.apply(record,record.args),"timeout"===record.method&&this._cbMap.delete(id))},WorkerTimer.prototype.setWorkerTimer=function(e,r,t){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];var o=this._genId();return this._cbMap.set(o,{method:e,cb:r,args:n}),this._worker.postMessage({type:"set",payload:{method:e,id:o,delay:t||0}}),o},WorkerTimer.prototype.clearWorkerTimer=function(e){e&&"number"==typeof e&&(this._cbMap.delete(e),this._worker.postMessage({type:"clear",payload:{id:e}}))},WorkerTimer}();exports.default=WorkerTimer},612:function(e,r,t){t.r(r),t.d(r,{default:function(){return o}});var n=t(477),i=t.n(n);function o(){return i()('!function(){"use strict";var t,e,a;t=self,e=new Map,a=function(e){t.postMessage({type:"call",payload:{id:e}})},t.addEventListener("message",(function(t){var d,o,i,n;"set"===t.data.type&&(d=t.data.payload.method,o=t.data.payload.id,i=t.data.payload.delay,n="timeout"===d?setTimeout((function(){a(o),e.delete(o)}),i):setInterval((function(){return a(o)}),i),e.set(o,{method:d,timerId:n})),"clear"===t.data.type&&function(t){var a=e.get(t);a&&("timeout"===a.method?clearTimeout(a.timerId):clearInterval(a.timerId),e.delete(t))}(t.data.payload.id)}))}();',"Worker",void 0,void 0)}},477:function(e){e.exports=function(e,r,t,n){var i=self||window;try{try{var o;try{o=new i.Blob([e])}catch(r){(o=new(i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||i.MSBlobBuilder)).append(e),o=o.getBlob()}var a=i.URL||i.webkitURL,u=a.createObjectURL(o),c=new i[r](u,t);return setTimeout((function(){a.revokeObjectURL(u)})),c}catch(n){return new i[r]("data:application/javascript,".concat(encodeURIComponent(e)),t)}}catch(e){if(!n)throw Error("Inline worker is not supported");return new i[r](n,t)}}}},__webpack_module_cache__={};function __nested_webpack_require_5630__(e){if(__webpack_module_cache__[e])return __webpack_module_cache__[e].exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__nested_webpack_require_5630__),r.exports}__nested_webpack_require_5630__.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return __nested_webpack_require_5630__.d(r,{a:r}),r},__nested_webpack_require_5630__.d=function(e,r){for(var t in r)__nested_webpack_require_5630__.o(r,t)&&!__nested_webpack_require_5630__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},__nested_webpack_require_5630__.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},__nested_webpack_require_5630__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__nested_webpack_require_5630__(902);return __webpack_exports__}()},module.exports=r()},9260:function(e,r,t){"use strict";e.exports=t.p+"static/media/sound.fa3551f6fab3f9997888.mp3"}}]);
//# sourceMappingURL=345.d1f21cb6.chunk.js.map